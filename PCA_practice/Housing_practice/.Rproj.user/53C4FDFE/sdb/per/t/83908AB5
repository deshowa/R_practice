{
    "collab_server" : "",
    "contents" : "\n## the data_cleanup.R file contains all of the tidying procedures used to get to the analysis phase\n## to run the code and re-create the file we can call the source() function\n\nsource(\"analysis/data_cleanup.R\")\nlibrary(ggplot2)\n\n# Now that we ensured that the data has been created, let's just clear the workspace so we can do the analysis\n\nls()\nrm(list= ls())\n\n# now we can read in the tidy dataset\n\ngdp_education_data<- read.csv(\"analysis/data/tidy_gdp_educ_data.csv\", header = TRUE)\n\nsapply(gdp_education_data, class)\n\nhead(gdp_education_data)\nls(gdp_education_data)\n\n# See, I really like this format, because I can differentiate which columns came from the gdp dataset with the \"_\" \n\n\n##QUESTIONS\n\n# question1: How many of the IDs match?\n# answer1: Since I merged the data with an inner join, the records that match can be pulled with the nrow() function.  \n  # I see that we have 189 matches\n\nmatching_cases<- nrow(gdp_education_data)\nmatching_cases\n\n# question2: What is the 13th country in the dataframe when the data is sorted in ascending order by GDP rank?\n\n# first, I will order the data:\n\ngdp_education_data<- gdp_education_data[order(gdp_education_data$GDP_US_dollars),]\n\n# second, I will pull the 13th country, and make it into a variable because I like creating variables\n\nthirteenth_ranked_country <- gdp_education_data[13,]\n\n# I filtered for St.Kitts, but it is still a dataframe, I want a clean result, so I will just make the variable a vector\nclass(thirteenth_ranked_country)\n\nas.vector(thirteenth_ranked_country$economy)\n# Alright, St.Kitts is the 13th smallest\n\n# question3: What are the average GDP rankings for the \"high income:oecd and \"high income nonOECD\" groups\n\n# first let me filter out the dataset\nhigh_income_groups<- subset(gdp_education_data,Income.Group == \"High income: OECD\" | Income.Group == \"High income: nonOECD\")\n# check the filtering\nstr(high_income_groups)\n#This looks right, but let me make sure that I am only pulling those 2 groups\nas.vector(unique(high_income_groups$Income.Group))\nlength(as.vector(unique(high_income_groups$Income.Group)))\n# great, that looks good\n\n\naggregate(high_income_groups$GDP_rank, list(high_income_groups$Income.Group),FUN = mean)\n# looks like the mean rank of High income: nonOECD  is 91.9 and the mean rank of the high income: OECD is about 33.0 (32.9 rounded)\n\n\n#question4: plot the gdp of all countries.  Use ggplot2 to color your plot by income group\n\n\nggplot(data = gdp_education_data, aes(x = economy, y = GDP_US_dollars, fill = Income.Group )) + geom_bar(stat = \"identity\")\n\n# The first graph was nice, but hard to see, so looking at the log still seems to show the relative ranks while making more items visible\n#ggplot(data = gdp_education_data, aes(x = economy, y = log(GDP_US_dollars), fill = Income.Group )) + geom_bar(stat = \"identity\")\n\n\n\n# the graph is hard to read, if we look at a scatterplot of ranks versus GDP, it sorts the data automatically\n\nplot(gdp_education_data$GDP_rank, gdp_education_data$GDP_US_dollars)\n\n\n# Cut the GDP ranking into 5 separate quantile groups, make a table versus income group\n\n# get quantiles\nseq(0,1,.2)\n\n# use the handy dandy cut function to create the cut up variable!  \ngdp_education_data$GDP_quantile<- cut(gdp_education_data$GDP_rank, quantile(gdp_education_data$GDP_rank, probs = c(0.0, 0.2, 0.4, 0.6, 0.8, 1.0)))\n\n# now to create a summary table of the variables\nquantile_table<-aggregate(gdp_education_data$GDP_rank, list(gdp_education_data$Income.Group, gdp_education_data$GDP_quantile),FUN = length)\nquantile_table\n\n\n## How many countries are lower middle income but among 38 nations with the highest GDP\n\nnrow(highest_GDP_lowest_income_data<- subset(gdp_education_data,Income.Group == \"Lower middle income\" & GDP_rank <39))\n\n# looks like 5 countries meet the criteria\n\n\n# now a little rogue analysis\n\n# just want to look at the top and bottom 10\ntop_10<- subset(gdp_education_data,GDP_rank <11)\nplot(top_10$GDP_US_dollar,top_10$economy,  col = top_10$Income.Group)\n\n\n# now a little rogue analysis,\nbottom_10<- subset(gdp_education_data,GDP_rank >180)\nplot(bottom_10$GDP_US_dollar,bottom_10$economy,  col = bottom_10$Income.Group)\nbottom_10\n\n",
    "created" : 1483491466039.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "906565036",
    "id" : "83908AB5",
    "lastKnownWriteTime" : 1466039290,
    "last_content_update" : 1466039290,
    "path" : "C:/SMU Data science/Doing data science course/Units/Unit 6/case_study/analysis/data_analysis.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}